# supervisord.conf example
[supervisord]
nodaemon=true

# <<< --- ADD THIS PROGRAM SECTION FOR REDIS --- >>>
[program:redis]
command=/usr/bin/redis-server --loglevel notice
autostart=true
autorestart=true
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0

# <<< --- RENAME and MODIFY this section for HAPI --- >>>
[program:hapi]
# Command to run the HAPI starter JAR directly
# Assumes the built artifact is /tmp/hapi-starter/target/ROOT.war
# Adjust path/filename if the starter build produces something different
command=java -jar /tmp/hapi-starter/target/ROOT.war
# Optional: Set working directory if needed
# directory=/tmp/hapi-starter
autostart=true
autorestart=true
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0

[program:inferno_web]
directory=/app
command=bundle exec puma -t 5:5 -p 4567
user=root ; Adjust user if needed
autostart=true
autorestart=true
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0

# Add inferno_worker if needed by your test suite
 # [program:inferno_worker]
 # directory=/app
 # command=bundle exec rake jobs:work
 # user=root ; Adjust user if needed
 # autostart=true
 # autorestart=true
 # ... logs etc ...
